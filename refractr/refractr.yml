refracts:
# 'status' will default to 301, if unspecified
# 'tests' will be generated except the rewrite case (Ex4)
#
# Ex1 One Source
#   - destination(dst): source(srcs)
#
#   - https://wiki.mozilla.org: wiki.mozilla.com
#
#   The loaded data structure will be this:
#
#   - srcs:
#     - wiki.mozilla.com
#     dst: https://wiki.mozilla.org/
#     status: 301
#     tests:
#     - http://wiki.mozilla.com: https://wiki.mozilla.org/
#
#   Note: remember the status and tests are defaults if unspecified.
#
# Ex2 Multiple Sources
#   - destination(dst):
#     - source1
#     - source2
#
#   - https://www.mozillalabs.com/:
#     - labs.mozilla.org
#     - labs.mozilla.com
#
#   The loaded data structure will be this:
#
#   - srcs:
#     - labs.mozilla.org
#     - labs.mozilla.com
#     dst: https://www.mozillalabs.com/
#     status: 301
#     tests:
#     - http://labs.mozilla.com: https://www.mozillalabs.com/
#
#   Note: remember the status and tests are defaults if unspecified.
#
# Ex3 Redirect, Paths -> Destinations
#   - srcs: src(s)
#     dst:
#       path1: dst1
#       path2: dst2
#
#   - srcs: lockwise.firefox.com
#     dst:
#     - /faq.html: https://support.mozilla.org/products/firefox-lockwise/
#     - /addon/updates.json: https://mozilla-lockwise.github.io/addon/updates.json
#     - /: https://www.mozilla.org/firefox/lockwise/
#
#   The loaded data structure will be this:
#
#   - srcs:
#     - lockwise.firefox.com
#     dst:
#     - /faq.html: https://support.mozilla.org/products/firefox-lockwise/
#     - /addon/updates.json: https://mozilla-lockwise.github.io/addon/updates.json
#     - /: https://www.mozilla.org/firefox/lockwise/
#     status: 301
#     tests:
#     - http://lockwise.firefox.com/faq.html: https://support.mozilla.org/products/firefox-lockwise/
#     - http://lockwise.firefox.com/addon/updates.json: https://mozilla-lockwise.github.io/addon/updates.json
#     - http://lockwise.firefox.com/: https://www.mozilla.org/firefox/lockwise/
#
#   Note: Remember the status and tests are defaults if unspecified. Here you
#				  can see how the tests specify src: dst incorporating the path fragments.
#
# Ex4 Rewrite with If and Redirect Directives
#   - srcs: src(s)
#     dst:
#     - if <some-valid-nginx-predicate>
#       ^: <rewrite>
#     - redirect: (optional) <catchall-redirect> (used when the 'if' condtional fails)
#
#   - srcs:
#     - '*.start.mozilla.com'
#     - '*.start2.mozilla.com'
#     - '*.start3.mozilla.com'
#     - '*.start-prod.mozilla.com'
#     dst:
#     - if: '$http_host ~ "^(?<lang>[a-z]{2,3}(-[a-z]{2})?)?\.(start.*)$"'
#       ^: https://start.mozilla.org/$lang$request_uri
#     - redirect: https://start.mozilla.org/
#     tests:
#     - http://ca.start.mozilla.com: https://start.mozilla.org/ca/
#     - http://en-us.start.mozilla.com: https://start.mozilla.org/en-us/
#     - http://en-uk.start.mozilla.com: https://start.mozilla.org/en-uk/
#
#   The loaded data structure will be this:
#
#   - srcs:
#     - '*.start.mozilla.com'
#     - '*.start2.mozilla.com'
#     - '*.start3.mozilla.com'
#     - '*.start-prod.mozilla.com'
#     dst:
#     - ^: https://start.mozilla.org/$lang$request_uri
#       if: $http_host ~ "^(?<lang>[a-z]{2,3}(-[a-z]{2})?)?\.(start.*)$"
#     - redirect: https://start.mozilla.org/
#     status: 301
#     tests:
#     - http://ca.start.mozilla.com: https://start.mozilla.org/ca/
#     - http://en-us.start.mozilla.com: https://start.mozilla.org/en-us/
#     - http://en-uk.start.mozilla.com: https://start.mozilla.org/en-uk/
#
#   Note: In the complex(native) case the 'src' and 'dst' keys match
#				  exactly. As before, 'status' will default to 301 if not
#				  specified. However, the 'tests' must be specified for rewrites
#				  such as this.

- srcs:
  - firefox.com
  - www.firefox.com
  dst:
    # bug 1485429, 1432228
  - /switch: https://www.mozilla.org/en-US/firefox/
  - /mobile: https://www.mozilla.org/mobile/

  - /beta: https://www.mozilla.org/firefox/channel/

  - /aurora: https://www.mozilla.org/firefox/channel/

  - /nightly: https://nightly.mozilla.org/

  - /m: https://www.mozilla.org/m/

  - /tour: https://www.mozilla.org/firefox/central/

    # bug 870410
  - /universityambassadors: https://www.mozilla.org/contribute/universityambassadors/
  - /os: https://www.mozilla.org/firefox/os/?utm_source=firefox-com&utm_medium=referral&utm_content=firefox-os

    # bug 1004274
  - /desktop: https://www.mozilla.org/firefox/desktop/?utm_source=firefox-com&utm_medium=referral&utm_content=firefox-desktop

    # bug 1053356
  - /android: https://www.mozilla.org/firefox/android/?utm_source=firefox-com&utm_medium=referral&utm_content=firefox-android

    # bug 1091132
  - /developer: https://www.mozilla.org/firefox/developer/?utm_source=firefox-com&utm_medium=referral&utm_content=firefox-developer

    # bug 1091891
  - /10: https://www.mozilla.org/firefox/independent/?utm_source=firefox-com&utm_medium=referral&utm_content=firefox-10
  - /independant: https://www.mozilla.org/firefox/independent/?utm_source=firefox-com&utm_medium=referral&utm_content=firefox-10

    # bug 1098044
  - /hello: https://www.mozilla.org/firefox/hello/?utm_source=firefox-com&utm_medium=referral&utm_content=firefox-hello

    # bug 1159397
  - /personal: https://www.mozilla.org/firefox/personal/
  - /personal/*: https://www.mozilla.org/firefox/personal/*

    # bug 1219380
  - /choose: https://www.mozilla.org/firefox/choose/

    # bug 896570, 1427843
  - /: https://www.mozilla.org/firefox/?utm_source=firefox-com&utm_medium=referral

# bug 537925
# NOTE: simplified this after testing, this simple redirect is all that is needed
- https://www.mozilla.org/contribute/: contribute.mozilla.org

# bug 1263033
- https://donate.mozilla.org/: join.mozilla.org
  status: 307

# bug 20170327
- https://videos.cdn.mozilla.net/:
  - videos-cdn.mozilla.net
  - videos.mozilla.org
  - videos-ssl-cdn.mozilla.net

# NOTE: changed from http->https after verifying
- https://www.mozillalabs.com/:
  - labs.mozilla.org
  - labs.mozilla.com

# bug 503731, 528747, 537144
- https://addons.mozilla.org/:
  - extensions.mozilla.org
  - themes.mozilla.org
  - update.mozilla.org
  - updates.mozilla.org
  - addons.update.mozilla.org
  - firefoxaddons.com
  - www.firefoxaddons.com

# NOTE: changed from http->https after verifying
- https://www.thunderbird.net/:
  - lightning-project.org
  - www.lightning-project.org

# bug 510914
# NOTE: changed from http->https after verifying
- https://wiki.mozilla.org/: library.mozilla.org

# bug 572191
# NOTE: changed from http->https after verifying
- https://crash-stats.mozilla.com/:
  - talkback.mozilla.org
  - talkback-public.mozilla.org
  - talkback-reports.mozilla.org

- https://blog.mozilla.org/blog/2010/07/15/thanks-for-an-exciting-firefox-cup/:
  - firefoxcup.com
  - firefoxcup2010.com
#  - www.firefoxcup.com
  - www.firefoxcup2010.com

# bug 613649
- https://krakenbenchmark.mozilla.org/: krakenbenchmark.mozilla.com

# bug 614684
- https://blog.mozilla.org/blog/2008/12/22/congratulations-fox-for-all-wins-impact-mozilla/:
  - impactmozilla.com
  - www.impactmozilla.com

# bug 681943
- https://mozillafestival.org/: festival.mozilla.org

# bug 1490779
- https://aus4.mozilla.org/: aus2.mozilla.org

# bug 692904
- https://www.mozilla-russia.org/:
  - mozilla.com.ru
  - www.mozilla.com.ru

# bug 722504
- https://wiki.mozilla.org/Security/Events/CTF:
  - mozillactf.org
  - www.mozillactf.org

# bug 695084
- https://developer.mozilla.org/: dev.mozilla.org

# bug 749836
- https://www.mozilla.org/firefox/new/?utm_source=firefox-pt&utm_medium=referral:
  - firefox.pt
  - www.firefox.pt

# bug 784556, 880423
- https://mana.mozilla.org/wiki/display/SD/print.mozilla.com: print.mozilla.com

# bug 804895
- https://wiki.mozilla.org/Platform/AreWeFunYet:
  - arewefunyet.com
  - www.arewefunyet.com

# bug 811323
# TODO: switch all HTTP sources to use HTTP and HTTPS, currently tests won't pass that way but once they are on Netlify they will
- https://developer.mozilla.org/demos/devderby: devderby.mozilla.org

# bug 855746
# TODO: figure out why this won't pass tests.  It works for me in curl
- https://mozilla.ec/:
  - mozillaecuador.org
  - www.mozillaecuador.org

# bug 908234
- https://blog.mozilla.org/webdev/: webdev.mozilla.org

- https://www.mozilla.org/MPL/: mpl.mozilla.org

# bug 941881
# NOTE: changed from http->https after verifying
- https://www.mozilla.org/en-US/contribute/studentambassadors/:
  - ambassadors.mozilla.org
  - students.mozilla.org
  - fsa.mozilla.org

# bug 971390
- https://www.mozilla.org/ru/firefox/new/:
  - firefoxik.ru
  - www.firefoxik.ru

# bug 998526, 20170328
- https://docs.google.com/forms/d/1VSlo6TZ5p42LyTx2q7Wd5vQ5hZHvWtA9JN6JWicXmBM/viewform: confsurvey.mozilla.org

# bug 850584
# NOTE: changed from http->https after verifying
- https://download.cdn.mozilla.net/: releases.mozilla.org

# bug 1025191
- https://www.mozilla.org/en-US/:
  - mozilla.ca
  - www.mozilla.ca

# bug 1035550
- https://wiki.mozilla.org/: wiki.mozilla.com

# bug 1136318
# NOTE: changed from http->https after verifying
- https://www.mozilla.de/:
  - mozilla.at
  - www.mozilla.at

# bug 1203755
- https://wiki.mozilla.org/B2G:
  - boot2gecko.org
  - www.boot2gecko.org
  status: 307

# bug 1056359
- https://www.mozilla.org/en-US/firefox/new/:
  - mozilla.it
  - wwww.mozilla.it

# bug 1212631, 1427843
- https://www.mozilla.org/firefox/new/?utm_source=getfirefox-co-uk&utm_medium=referral: getfirefox.co.uk


# bug 1212612, 1212612
- https://www.mozilla.org/firefox/new/?utm_source=getfirefox-de&utm_medium=referral:
  - getfirefox.de
  - www.getfirefox.de
  - firefox-hacks.de
  - www.firefox-hacks.de
  - firefox2.de
  - www.firefox2.de

# bug 1214568
- https://blog.mozilla.org/creative: creative.mozilla.org

# bug 1225273, 1359534
- https://docs.taskcluster.net/: taskcluster.net

# bug 1212612, 1427843
- https://www.mozilla.org/firefox/new/?utm_source=getfirefox-net&utm_medium=referral:
  - getfirefox.net
  - www.getfirefox.net

# bug 1195576
- https://mozillafoundation.org:
  - mozillafoundation.com
  - mozillafoundation.net

# bug 1243236
- https://careers.mozilla.org/:
  - jobs.mozilla.org
  - jobs.mozilla.com

# bug 1243355
- https://www.mozilla.org/fy-NL/:
  - mozilla.frl
  - www.mozilla.frl

# bug 1255190
- https://www.openwebgames.com/: openwebgames.com

# bug 1259820
- https://air.mozilla.org/: air.mozilla.com

# bug 1268570, 1427843
- https://www.mozilla.org/firefox/new/?utm_source=firefox-lt&utm_medium=referral:
  - firefox.lt
  - www.firefox.lt

# bug 1290923
- https://disconnect.me/trackerprotection:
  - trackingprotection.info
  - www.trackingprotection.info

# bug 1262196, 1427843
- https://www.mozilla.org/firefox/new/?utm_source=firefox-hu&utm_medium=referral:
  - firefox.hu
  - www.firefox.hu

# bug 1311392
- https://www.mozilla.org/pl/firefox/new/:
  - mozillafirefox.pl
  - www.mozillafirefox.pl

# bug 1334200
- https://github.com/mozilla/popcorn-js/:
  - popcornjs.org
    #- www.popcornjs.org

# bug 1342698
# NOTE: changed from http->https after verifying
- https://blog.mozilla.org/: mozillausa.org

- https://www.mozilla.org/firefox/:
  # bug 838939
  - downloadmozillafirefox.com
  # bug 948963
  - spark.mozilla.org
  status: 302

- https://mozilla.org/:
  - redirect-san.mozilla.org
  status: 307

# NOTE: changed from http->https after verifying
# FIXME: how is this zeus stuff going to work going forward?
- https://mozilla.org/: redirects-http-only.external.zlb.scl3.mozilla.com
  status: 307

# bug 688019, 1427843
- https://www.mozilla.org/firefox/new/?utm_source=getfirefox-org&utm_medium=referral:
  - getfirefox.org
  - www.getfirefox.org

# virtual-redirect-autogen.conf merged into virtual-redirect
# this used to be generated by a script somehow, but not now.
# that script was dnsconfig/bin/generate-virtual-redirects.sh
- https://www.mozilla.org/:
  - virtual-redirect-mozilla.org
  - virtual-redirect-mozilla.com
  - mozillaservice.net
  - www.mozillaservice.net
  - firefox4all.com
  - www.firefox4all.com
  - firefoxsoftware.com
  - www.firefoxsoftware.com
  - getfirfox.com
  - www.getfirfox.com
  - update-firefox.com
  - www.update-firefox.com
  - extendfirefox.com
  - www.extendfirefox.com
  - onemozilla.org
  - www.onemozilla.org
  # bug 1234360
  - firefoxflicks.mozilla.org
  # bug 126196
  - mozilla.hu
  - www.mozilla.hu
  # bug 1331870
  - events.mozspaces.org
  # bug 710695, 708705
  - firefoxflicks.com
  - firefoxflicks.org
  - www.firefoxflicks.com
  - www.firefoxflicks.org
  # fashionyourfirefox.com - Modified as per bug 614412
  - fashionyourfirefox.com
  - www.fashionyourfirefox.com
  # We're not using website-beta right now.
  - website-beta.mozilla.org
  # split out store.mozilla.org|com as per bug 1142629
  # modified for bug 1260869 now that gear.mozilla.org has gone away
  - www.store.mozilla.org
  - store.mozilla.org
  - store.mozilla.com
  # bug 619759
  - www.mozilla.net
  # bug 870904
  - mozsecworld.org
  - www.mozsecworld.org
  # bug 841514
  - detodosparatodos.org
  - www.detodosparatodos.org
  - detodosparatodos.com
  - www.detodosparatodos.com
  # bug 1268570
  - firefox-downloaden.de
  # bug 830904
  - communitystore.mozilla.org
  # TODO: can we decom this?
  # bug 1234360
  - mobilepartners.mozilla.org
  # bug 1329125
  - masterfirefoxos.mozilla.org
  status: 302

- https://marketplace.firefox.com/: apps.mozillalabs.com

# bug 1427843
- https://www.mozilla.org/firefox/new/?utm_source=firefox-be&utm_medium=referral:
  - firefox.be
  - www.firefox.be

# bug 713065
- https://wiki.mozilla.org/MarketingGuide: guides.mozilla.org

# bug 998357
- https://activations.cdn.mozilla.net/:
  - activations.mozilla.com
  - activations.mozilla.org

# bug 1274647
- https://discourse.mozilla-community.org/c/firefox-development/: ask.mozilla.org

# bug 1351245
- 'https://www.mozilla.org/firefox/channel/desktop/#developer': aurora.mozilla.org

# bug 656457
- 'https://www.mozilla.org/firefox/channel/#beta': beta.mozilla.org

# bug 1246674
- https://careers.mozilla.org/: careers.mozilla.com

# bug 1119912, 1165757, 1213900, 1200359
# TODO: verify this works as expected / previously
- srcs: content.mozilla.org
  dst:
  - /dmexco: https://www.mozilla.org/about/partnerships/contentservices/?utm_source=content-moz-org&utm_medium=referral&utm_content=content_team
  - /*: https://www.mozilla.org/about/partnerships/contentservices/:splat/?utm_source=content-moz-org&utm_medium=referral&utm_content=content_team
  - /: https://www.mozilla.org/about/partnerships/contentservices/?utm_source=content-moz-org&utm_medium=referral&utm_content=content_team

# bug 756358
# TODO: verify this works as expected
- srcs: dnt.mozilla.org
  dst:
  # NOTE: changed from http->https after verifying
  - /dnt-enabler.tpl: https://www.mozilla.org/media/dnt/dnt-enabler.tpl
  - /: https://www.mozilla.org/firefox/dnt/

# bug 1185027
- https://www.contributejson.org/: contributejson.org

# bug 1335596
# NOTE: changed redirect to its final destination
- https://mozilla.design/: designlanguage.mozilla.org

# bug 1200302
- https://discourse.mozilla.org/c/add-ons: forums.mozilla.org

# bug 1255221
- https://www.mozilla.org/contribute/friends: friends.mozilla.org

# bug 896570, 1427843, 1485429, 1297860
- https://www.mozilla.org/firefox/new/?redirect_source=getfirefox-com:
  - getfirefox.com
  - www.getfirefox.com

# bug 896570
- https://www.mozilla.org/firefox/?redirect_source=getfirefox-com:
  - mozillafirefox.com
  - www.mozillafirefox.com
  - firefoxbrowser.com
  - www.firefoxbrowser.com
  - firefoxbrowser.org
  - www.firefoxbrowser.org

# bug 1290260
- https://wiki.mozilla.org/DeveloperServices/HistoricalVCS: git.mozilla.org

# bug 1315316
- https://qsurvey.mozilla.com/s3/FirefoxInput/:
  - input.mozilla.org
  - input.mozilla.com

- https://qsurvey.mozilla.com/s3/FirefoxInput/:
  - m.input.mozilla.org
  - m.input.mozilla.com
  - feedback.mozilla.org

# bug 1150296
- https://irccloud.mozilla.com/: irccloud.mozilla.org
  status: 302

# bug 1335617
- https://www.mozilla.org/en-US/about/policy/lean-data/:
  - leandatapractices.org
  - www.leandatapractices.org
  - leandatapractices.com
  - www.leandatapractices.com
  status: 302

# bug 1306375
- https://wiki.mozilla.org/TestEngineering/Testrail: moztrap.mozilla.org

# bug 1301642, 1326390
- 'https://www.mozilla.org/firefox/channel/#nightly': nightly.mozilla.org

# bug 985510
- https://pontoon.mozilla.org/: pontoon.mozillalabs.com

# bug 1311146
- https://donate.mozilla.org/: sendto.mozilla.org
  status: 307

# bug 1206287
- https://www.srihash.org/: srihash.org

# bug 1340330
- https://www.metricsgraphicsjs.org/: metricsgraphicsjs.org

# bug 1320683
- https://www.arewestableyet.com/: arewestableyet.com

# bug 1361114
- https://www.mozilla.org/: webwewant.mozilla.org

- https://www.mozilla.org/: mozilla-podcasts.org

# bug 1366849
- https://www.mozilla.org/en-US/projects/calendar/: calendar.mozilla.org

# bug 1384357
- https://www.extensiontest.com/: extensiontest.com

# bug 1396954
- https://research.mozilla.org/mixed-reality: mixedreality.mozilla.org

# bug 1414285, 1429854
- https://onlinexperiences.com/scripts/Server.nxp?LASCmd=L:0&AI=1&InitialDisplay=1&ClientBrowser=0&ShowKey=44908: airmo.mozilla.org

# bug 1415362
- https://www.mozilla.org/firefox/?utm_medium=referral&utm_source=firefoxquantum-com: firefoxquantum.com

# bug 1421587
- https://medium.com/mozilla-open-innovation: open.mozilla.org

# bug 1441865
- https://mozilla-releng.net/treestatus: treestatus.mozilla.org

# bug 1330438
- https://moz-releng-docs.readthedocs.io/en/latest/: docs.pub.build.mozilla.org

# bug 1459170
- https://perf-html.io/: cleopatra.io

# bug 1461516
- https://www.mozilla.org/: smartdogz.org

# bug 1169224, 1473015
- https://www.mozilla.org/:
  - mozilla.org.uk
  - www.mozilla.org.uk

# bug 1485991
- https://onlinexperiences.com/scripts/Server.nxp?LASCmd=L:0&AI=1&InitialDisplay=1&ClientBrowser=0&ShowKey=44908: air.mozilla.org

# bug 1419948
# TODO: verify this works as before
- https://web.archive.org/web/20180106223649/https://webfwd.org/:
  - webfwd.org
  - www.webfwd.org
  - webfwd.net
  - www.webfwd.net

# bug 1462137
- https://hubs.mozilla.com/:
  - hub.mozilla.com
  - hub.mozilla.org

# bug 1293353
- https://mozilla.service-now.com/: thehub.mozilla.com

# bug 1492531
- https://wiki.mozilla.org/Pastebin: pastebin.mozilla.org

# bug 1492428
- https://www.mozilla.org/en-GB/firefox/new/?utm_source=mozilla-eu&utm_medium=referral:
  - mozilla.eu
  - www.mozilla.eu
  - mozila.eu
  - www.mozila.eu

  # bug 1492428
- https://www.mozilla.org/fr/firefox/new/?utm_source=mozilla-fr&utm_medium=referral:
  - mozilla.fr
  - www.mozilla.fr

# bug 1463086
- https://mozilla.org/nl/:
  - mozilla.nl
  - www.mozilla.nl

# bug 1502902
- https://events.mozilla.org/techspeakers/: techspeakers.mozilla.org

  # bug 1522224
- https://testpilot.firefox.com/: contribute.testpilot.firefox.com

  # bug 1533035
- https://mozilla.github.io/geckoview/: geckoview.dev

- https://mozilla.github.io/geckoview/: gv.dev

- https://developer.mozilla.org/: developer.mozilla.com

  # bug 1543423
- https://discourse.mozilla.org/: discourse.mozilla-community.org
  status: 307

- https://www.mozilla.org/: triagebot.mozilla.org

# TODO: test this works as before
# bug 1304806
- https://phonebook.mozilla.org/: phonebook.mozilla.com
# bug 1566155
- srcs: phonebook.mozilla.org
  dst:
  - /tree.php: https://people.mozilla.org/o
  - /*: https://people.mozilla.org/s?query=:*&who=staff
  - /: https://people.mozilla.org/

- https://pad.mozilla.org/: public.etherpad-mozilla.org

# bug 1581429
- https://support.mozilla.org/en-US/kb/canary-domain-use-application-dnsnet/: use-application-dns.net

# bug 1538932
- https://mozilla.report/: reports.telemetry.mozilla.org

# bug 1587941
# TODO: test this works as before
- srcs: lockwise.firefox.com
  dst:
  - /faq.html: https://support.mozilla.org/products/firefox-lockwise/
  - /addon/updates.json: https://mozilla-lockwise.github.io/addon/updates.json
  - /: https://www.mozilla.org/firefox/lockwise/

- https://www.mozilla.org/firefox/lockwise/: lockbox.firefox.com

  # bug 1440375
- https://www.mozilla.org/pt-BR/: mozilla.com.br

# Test domains
- https://www.mozilla.org/:
  - '*.mozilla-redirects.xyz'
  - mozilla-redirects.xyz
  - refractr.allizom.org
  - refractr1.allizom.org

# bug 149411
# NOTE: changed from http->https after verifying
- https://start.mozilla.org/:
  - start.mozilla.com
  - start-prod.mozilla.com

- srcs:
  - '*.start.mozilla.com'
  - '*.start2.mozilla.com'
  - '*.start3.mozilla.com'
  - '*.start-prod.mozilla.com'
  dst:
  - if: '$http_host ~ "^(?<lang>[a-z]{2,3}(-[a-z]{2})?)?\.(start.*)$"'
    ^: https://start.mozilla.org/$lang$request_uri
  - redirect: https://start.mozilla.org/
  tests:
  - http://ca.start.mozilla.com: https://start.mozilla.org/ca/
  - http://en-us.start.mozilla.com: https://start.mozilla.org/en-us/
  - http://en-uk.start.mozilla.com: https://start.mozilla.org/en-uk/

- srcs:
  - malware-error.mozilla.com
  - '*.malware-error.mozilla.com'
  dst:
  - if: '$query_string ~ "^hl=(?<hl>[^&]+)&url=(?<url>[^&]+)"'
    ^/$: 'https://www.stopbadware.org/firefox?hl=$hl&url=$url?'
  - if: '$query_string ~ "^url=(?<url>[^&]+)"'
    ^/$: 'https://www.stopbadware.org/firefox?url=$url?'
  - redirect: https://$host$request_uri
  tests:
  - http://malware-error.mozilla.com?hl=en&url=path: 'https://www.stopbadware.org/firefox?hl=en&url=path'
  - http://malware-error.mozilla.com?url=path: 'https://www.stopbadware.org/firefox?url=path'
  - http://malware-error.mozilla.com: https://malware-error.mozilla.com/

- srcs:
  - phish-error.mozilla.com
  - '*.phish-error.mozilla.com'
  dst:
  - if: '$query_string ~ "^hl=(?<hl>[^&]+)&url=(?<url>[^&]+)"'
    ^/$: 'https://safebrowsing.google.com/safebrowsing/report_error/?tpl=mozilla&hl=$hl&url=$url?'
  - if: '$query_string ~ "^url=(?<url>[^&]+)"'
    ^/$: 'https://safebrowsing.google.com/safebrowsing/report_error/?tpl=mozilla&url=$url?'
  - redirect: https://$host$request_uri
  tests:
  - http://phish-error.mozilla.com?hl=en&url=path: 'https://safebrowsing.google.com/safebrowsing/report_error/?tpl=mozilla&hl=en&url=path'
  - http://phish-error.mozilla.com?url=path: 'https://safebrowsing.google.com/safebrowsing/report_error/?tpl=mozilla&url=path'
  - http://phish-error.mozilla.com: https://phish-error.mozilla.com/

- srcs:
  - phish-report.mozilla.com
  - '*.phish-report.mozilla.com'
  dst:
  - if: '$query_string ~ "^hl=(?<hl>es)(?:-ES|-AR)&url=(?<url>[^&]+)"'
    ^/$: 'https://safebrowsing.google.com/safebrowsing/report_phish/?tpl=mozilla&hl=$hl&url=$url?'
  - if: '$query_string ~ "^hl=(?:nb|nn)-NO&url=(?<url>[^&]+)"'
    ^/$: 'https://safebrowsing.google.com/safebrowsing/report_phish/?tpl=mozilla&hl=no&url=$url?'
  - if: '$query_string ~ "^hl=pt-PT&url=(?<url>[^&]+)"'
    ^/$: 'https://safebrowsing.google.com/safebrowsing/report_phish/?tpl=mozilla&hl=pt-BR&url=$url?'
  - if: '$query_string ~ "^hl=(?<hl>ar|bg|cs|da|de|el|en|en-GB|es|fi|fr|hu|it|iw|ja|ko|nl|no|l|pt-BR|ru|sk|sv|tr|zh-CN|zh-TW)&url=(?<url>[^&]+)"'
    ^/$: 'https://safebrowsing.google.com/safebrowsing/report_phish/?tpl=mozilla&hl=$hl&url=$url?'
  - if: '$query_string ~ "^hl=(?<hl>[^&]+)&url=(?<url>[^&]+)"'
    ^/$: 'https://safebrowsing.google.com/safebrowsing/report_phish/?tpl=mozilla&hl=$hl&url=$url?'
  # bug 1387246, send lone url query strings to google safebrowsing
  - if: '$query_string ~ "url=(?<url>[^&]+)"'
    ^/$: 'https://safebrowsing.google.com/safebrowsing/report_phish/?tpl=mozilla&url=$url?'
  - redirect: https://www.mozilla.org/
  tests:
  - http://phish-report.mozilla.com?hl=es&url=path: 'https://safebrowsing.google.com/safebrowsing/report_phish/?tpl=mozilla&hl=es&url=path'
  - http://phish-report.mozilla.com?hl=nb-NO&url=path: 'https://safebrowsing.google.com/safebrowsing/report_phish/?tpl=mozilla&hl=no&url=path'
  - http://phish-report.mozilla.com?hl=pt-PT&url=path: 'https://safebrowsing.google.com/safebrowsing/report_phish/?tpl=mozilla&hl=pt-BR&url=path'
  - http://phish-report.mozilla.com?hl=en-GB&url=path: 'https://safebrowsing.google.com/safebrowsing/report_phish/?tpl=mozilla&hl=en-GB&url=path'
  - http://phish-report.mozilla.com?hl=zh-TW&url=path: 'https://safebrowsing.google.com/safebrowsing/report_phish/?tpl=mozilla&hl=zh-TW&url=path'
  - http://phish-report.mozilla.com?hl=foo&url=bar: 'https://safebrowsing.google.com/safebrowsing/report_phish/?tpl=mozilla&hl=foo&url=bar'
  - http://phish-report.mozilla.com?url=foobar: 'https://safebrowsing.google.com/safebrowsing/report_phish/?tpl=mozilla&url=foobar'
  - http://phish-report.mozilla.com/foobar: https://www.mozilla.org/

- https://mozilla.github.io/oi-website/: openinnovation.mozilla.org

# bug 617681
# NOTE: changed from http->https after verifying
- https://blog.mozilla.org/operationfx/2007/12/14/declassified-information-and-the-winner-is/:
  - operationfirefox.com
  - www.operationfirefox.com

# bug 1596457
- https://mozilla-spidermonkey.github.io/: spidermonkey.dev

# bug 1614193
- https://voice.mozilla.org/fy-NL/: voice.mozilla.frl
  status: 302

# bug 835529
- https://support.mozilla.org/: www.support.mozilla.org

# bug 1618512, 1627952
- srcs: events.mozilla.org
  dst:
  - /firefoxvoicecampaign: https://community.mozilla.org/activities/test-firefox-voice/
  - /respond_campaign: https://community.mozilla.org/campaigns/respond-campaign/
  - /firefoxforgood-surfacingqualitycontentandconversat: https://community.mozilla.org/campaigns/
  - /becomeabetatestingbughunter: https://community.mozilla.org/campaigns/become-a-beta-testing-bughunter/
  - /commonvoice100: https://community.mozilla.org/campaigns/common-voice-100-hours-sprint/
  - /firefox66supportsprint: https://community.mozilla.org/groups/support-mozilla-sumo/?view=events
  - /firefoxfightsforyoucampaign: https://community.mozilla.org/campaigns/firefoxfightsforyoucampaign/
  - /darkfunnelEN: https://community.mozilla.org/campaigns/become-a-dark-funnel-detective/
  - /*: https://community.mozilla.org/events/
