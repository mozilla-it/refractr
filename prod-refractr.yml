# these domains will be given a cert and rule through
# the ingress.yaml.template by being added to the domains
# output from refractr.py
default-domains:
  - prod.mozilla-redirects.xyz
  - prod.refractr.mozit.cloud
  - refractr.mozilla.org

default-headers:
  Strict-Transport-Security: '"max-age=60; includeSubDomains" always'

refracts:
  # OPST-305
- remote-settings-dev.allizom.org/:
  - settings.dev.mozaws.net

  # OPST-305
- firefox.settings.services.allizom.org/:
  - settings-cdn.stage.mozaws.net

  # OPST-305
- firefox-settings-attachments.cdn.allizom.org/:
  - firefox-settings-attachments-cdn.stage.mozaws.net

  # SVCSE-1586
- accounts.firefox.com/:
  - accounts.mozilla.org
  - accounts.mozilla.com

  # bug 998357
- activations.cdn.mozilla.net/:
  - activations.mozilla.com
  - activations.mozilla.org

  # bug 503731, 528747, 537144, SE-1683, SE-2688
- addons.mozilla.org/:
  - extensions.mozilla.org
  - themes.mozilla.org
  - update.mozilla.org
  - updates.mozilla.org
  - addons.update.mozilla.org
  - firefoxaddons.com
  - www.firefoxaddons.com
  - addons.mozilla.com
  - '*.add-ons.mozilla.com'
  - '*.add-ons.mozilla.org'

  # bug 1342698
  # NOTE: changed from http->https after verifying
- blog.mozilla.org/: mozillausa.org

  # bug 614684
- blog.mozilla.org/blog/2008/12/22/congratulations-fox-for-all-wins-impact-mozilla/:
  - impactmozilla.com
  - www.impactmozilla.com

  # bug 655911
- blog.mozilla.org/website-archive/2010/12/08/mozilla-uninstall-survey/: survey.mozilla.com

  # bug 1214568
- blog.mozilla.org/creative/: creative.mozilla.org
  status: 302

  # bug 908234
- blog.mozilla.org/webdev/: webdev.mozilla.org

  # SE-2698
- mana.mozilla.org/wiki/display/FIREFOX/Security: securitywiki.mozilla.org

# https://github.com/mozilla/bedrock/issues/10736
- dsts:
  - if: '$request_uri ~ ^/(.*)$'
    ^/(.*)$: www.mozilla.org/careers/$1
  - redirect: www.mozilla.org/careers/
  srcs:
  - careers.mozilla.org
  tests:
  - https://careers.mozilla.org/: https://www.mozilla.org/careers/
  # - https://careers.mozilla.org/#locations: https://www.mozilla.org/careers/#locations
  - https://careers.mozilla.org/listings: https://www.mozilla.org/careers/listings
  - https://careers.mozilla.org/listings/: https://www.mozilla.org/careers/listings/
  - https://careers.mozilla.org/feed/: https://www.mozilla.org/careers/feed/
  - https://careers.mozilla.org/position/gh/12345/: https://www.mozilla.org/careers/position/gh/12345/

# https://github.com/mozilla/bedrock/issues/10736
- www.mozilla.org/careers/:
  # bug 1246674
  - careers.mozilla.com
  # bug 1243236
  - jobs.mozilla.org
  - jobs.mozilla.com
  - college.mozilla.org
  - college.mozilla.com
  - interns.mozilla.com
  - university.mozilla.org
  - university.mozilla.com

  # bug 1627952
- community.mozilla.org/campaigns/common-voice-sprint: voice-sprint.mozilla.community

- community.mozilla.org/campaigns/help-firefox-win-on-android-support-users-in-your-language: supportsprint.mozilla.community

  # bug 1627952
- community.mozilla.org/campaigns/new-firefox/: newfirefox.mozilla.community

  # bug 1627952
- community.mozilla.org/campaigns/firefox-quantum-sprint/: firefoxsprint.mozilla.community

  # bug 1697571
- community.mozilla.org/es/groups/mozilla-hispano/:
  - mozilla-hispano.org
  - www.mozilla-hispano.org

  # bug 1697571
- discourse.mozilla.org/c/community-portal/mozilla-hispano/304: foro.mozilla-hispano.org

  # bug 1697638
- community.mozilla.org/es/groups/mozilla-venezuela/:
  - mozillavenezuela.org
  - www.mozillavenezuela.org

  # bug 572191
  # NOTE: changed from http->https after verifying
- crash-stats.mozilla.com/:
  - talkback.mozilla.org
  - talkback-public.mozilla.org
  - talkback-reports.mozilla.org

  # bug 695084
- developer.mozilla.org/:
  - dev.mozilla.org

  # SE-1571
- developer.mozilla.org/:
  - developer.cdn.mozilla.net
  status: 302

  # bug 811323
- developer.mozilla.org/demos/devderby/: devderby.mozilla.org

  # bug 1290923
- disconnect.me/trackerprotection/:
  - trackingprotection.info
  - www.trackingprotection.info
  status: 302

  # bug 1543423
- discourse.mozilla.org/: discourse.mozilla-community.org

  # bug 1200302
- discourse.mozilla.org/c/add-ons/: forums.mozilla.org
  status: 307

  # bug 1274647
- discourse.mozilla-community.org/c/firefox-development/: ask.mozilla.org
  status: 307

  # bug 998526, 20170328
- docs.google.com/forms/d/1VSlo6TZ5p42LyTx2q7Wd5vQ5hZHvWtA9JN6JWicXmBM/viewform/: confsurvey.mozilla.org

  # SE-1187
- docs.mozilla-releng.net/:
  - mozilla-releng.net
  - www.mozilla-releng.net

  # bug 1263033
- donate.mozilla.org/: join.mozilla.org
  status: 307

  # bug 1311146
- donate.mozilla.org/: sendto.mozilla.org
  status: 307

  # SE-1371
- searchfox.org/:  dxr.mozilla.org

  # bug 1502902 (formerly events.mozilla.org/techspeakers/)
  # bug 1660250
- community.mozilla.org/en/groups/tech-speakers/:
  - techspeakers.mozilla.org

  # bug 1195576
  # FIXME: this commented out redirect is incorrect, added correct one below
  #- mozillafoundation.org:
- foundation.mozilla.org/:
  - mozillafoundation.com
  - mozillafoundation.net

  # SE-1677
- foundation.mozilla.org/en/artifacts/x-ray-goggles/: goggles.mozilla.org

  # bug 1334200
- github.com/mozilla/popcorn-js/:
  - popcornjs.org
  - www.popcornjs.org

  # bug 1462137
- hubs.mozilla.com/:
  - hub.mozilla.com
  - hub.mozilla.org

  # bug 784556, 880423
- mana.mozilla.org/wiki/display/SD/print.mozilla.com/: print.mozilla.com

  # bug 731317m 730102
- marketplace.mozilla.org/:
  - apps.mozilla.com
  - apps.mozilla.org
  - market.mozilla.org

  # bug 1421587
- medium.com/mozilla-open-innovation/: open.mozilla.org
  status: 302

  # SVCSE-1589
- monitor.mozilla.org/: monitor.firefox.com

  # bug 1330438
- moz-releng-docs.readthedocs.io/en/latest/: docs.pub.build.mozilla.org

# mozdev.org legacy redirects. See https://jira.mozilla-community.org/browse/MCWS-55
# and https://jira.mozilla.com/browse/CORE-1422
- quickfilters.quickfolders.org/: quickfilters.mozdev.org
- zombiekeys.quickfolders.org/: zombiekeys.mozdev.org
- quickfolders.org/: quickfolders.mozdev.org
- github.com/eyalroz/bidimailui/: bidiui.mozdev.org
- wiki.mozilla.org/Consulting: consultants.mozdev.org
- www.amadzone.org/mozilla-archive-format/: maf.mozdev.org
- smarttemplates.quickfolders.org/: smarttemplate4.mozdev.org
- quickpasswords.quickfolders.org/: quickpasswords.mozdev.org
- github.com/eyalroz/removedupes/: removedupes.mozdev.org
- www.mozilla.org/:
  - mozdev.org
  - www.mozdev.org

  # bug 1335596
  # NOTE: changed redirect to its final destination
- mozilla.design/: designlanguage.mozilla.org

  # bug 855746
- mozilla.ec/:
  - mozillaecuador.org
  - www.mozillaecuador.org

  # IO-2668
- moztw.org/community/:
  - mozilla.tw
  - www.mozilla.tw

  # bug 1533035
- mozilla.github.io/geckoview/:
  - gv.dev
  - geckoview.dev
  status: 302

  # SE-1561, SE-1666, SE-1856, SE-3059
- connect.mozilla.org/ : ideas.mozilla.org

- mozilla.github.io/oi-website/: openinnovation.mozilla.org

  # jira SE-1295
- mozilla.hosted.panopto.com/:
  - air.mozilla.org
  - air.mozilla.com
  - airmo.mozilla.org

  # bug 1441865
- mozilla-releng.net/treestatus/: treestatus.mozilla.org
  status: 302

  # bug 1293353
- mozilla.service-now.com/: thehub.mozilla.com
  status: 302

- mozilla-services.readthedocs.io/en/latest/: docs.services.mozilla.com

# Jira SE-1354
- dsts:
  # u->p rewrite [SE-1960]
  - if: '$request_uri ~ ^/u/([^/]+)/*$'
    ^/u/([^/]+)/*$: people.mozilla.org/p/$1
  # no rewrite
  - if: '$request_uri ~ ^/(.+)$'
    ^/(.+)$: people.mozilla.org/$1
  # fallthrough
  - redirect: people.mozilla.org/
  srcs:
  - mozillians.org
  # bug 1617378
  - www.mozillians.org
  tests:
  # u->p rewrite
  - https://mozillians.org/u/abcdefg/: https://people.mozilla.org/p/abcdefg
  - https://www.mozillians.org/u/abcdefg: https://people.mozilla.org/p/abcdefg
  # no rewrite
  - https://mozillians.org/x/abcdefg: https://people.mozilla.org/x/abcdefg
  # fallthrough
  - https://www.mozillians.org/: https://people.mozilla.org/
  - https://mozillians.org/: https://people.mozilla.org/

  # bug 1459170
- perf-html.io/: cleopatra.io
  status: 302

- dsts:
  - url: /*
    headers:
      Clear-Site-Data: \"storage\"
    endpoint: profiler.firefox.com/
  - ^/(.*): profiler.firefox.com/
  srcs: perf-html.io
  headers:
    Clear-Site-Data: \"storage\"
  tests:
  - https://perf-html.io/: https://profiler.firefox.com/

- pontoon.mozilla.org/:
    # bug 985510
  - pontoon.mozillalabs.com
    # bug 1666547
  - l10n.mozilla.org

  # bug 1304806
- phonebook.mozilla.org/: phonebook.mozilla.com
  status: 302

  # bug 1234248
- planet.firefox.com/ux/: ux.firefox.com
  status: 302

  # bug 1220879
- prs.mozilla.io/: prs.paas.allizom.org

  # SE-1619, jira
- proton-form.herokuapp.com/: foxfooding.mozilla.community

  # SE-1902, SE-2005, SE-3040
- ideas.mozilla.org/:
  - input.mozilla.org
  - input.mozilla.com
  - m.input.mozilla.org
  - m.input.mozilla.com
  - feedback.mozilla.org
  - ideas.mozilla.com
  preserve-path: false
  status: 302

- start.mozilla.org/:
  - start.mozilla.com
  - start-prod.mozilla.com

  # bug 835529
- support.mozilla.org/: www.support.mozilla.org

  # SE-1564
- support.mozilla.org/en-US/kb/canary-domain-use-application-dnsnet:  use-application-dns.net

  # SVCSE-1316
- dsts:
    - /downloads/browser/latest/secure-proxy.xpi: archive.mozilla.org/pub/vpn/fpn/secure-proxy.xpi
    - /downloads/browser/updates.json: archive.mozilla.org/pub/vpn/fpn/updates.json
    # Needs to start with ^/ to switch from `location = /` to `location /`
    # https://github.com/mozilla-it/refractr/blob/80c019c468bb8ad6633bc5d53e6b154d8142dd6c/refractr/complex.py#L159-L160
    - ^/(.*): support.mozilla.org/kb/firefox-private-network-no-longer-available?utm_source=inproduct&utm_medium=support
  srcs:
    - fpn.firefox.com
    - premium.firefox.com
    - private-network.firefox.com
    - testpilot.firefox.com

  # bug 20170327
- videos.cdn.mozilla.net/:
  - videos-cdn.mozilla.net
  - videos.mozilla.org

  # bug 1614193
- commonvoice.mozilla.org/fy-NL/: voice.mozilla.frl
  status: 302

  # bug 1419948
- web.archive.org/web/20180106223649/https://webfwd.org/:
  - webfwd.org
  - www.webfwd.org
  - webfwd.net
  - www.webfwd.net
  status: 307

  # bug 1220879
- whatsdeployed.io/: whatsdeployed.paas.allizom.org
  status: 302

  # bug 1035550
- wiki.mozilla.org/: wiki.mozilla.com

  # bug 1290260
- wiki.mozilla.org/DeveloperServices/HistoricalVCS: git.mozilla.org
  status: 302

  # bug 713065
- wiki.mozilla.org/MarketingGuide: guides.mozilla.org

  # bug 804895
- wiki.mozilla.org/Platform/AreWeFunYet:
  - arewefunyet.com
  - www.arewefunyet.com

  # bug 1320683
- www.arewestableyet.com/: arewestableyet.com

  # bug 1384357
- www.extensiontest.com/: extensiontest.com
  status: 302

  # bug 1136318
  # NOTE: changed from http->https after verifying
- www.mozilla.de/:
  - mozilla.at
  - www.mozilla.at

- dsts:
  - url: /.well-known/matrix/client
    headers:
      Access-Control-Allow-Origin: "'*'"
      Access-Control-Allow-Methods: "'GET, POST, PUT, DELETE, OPTIONS'"
      Access-Control-Allow-Headers: "'X-Requested-With, Content-Type, Authorization'"
      X-Backend-Server: TS
      Cache-Control: max-age=3600
    endpoint: www.mozilla.org
  - ^/(.*): 'www.mozilla.org/$1'
  srcs: mozilla.org
  headers:
    X-Backend-Server: TS
    Cache-Control: max-age=3600
  tests:
  - https://mozilla.org/foo: https://www.mozilla.org/foo
  - https://mozilla.org/.well-known/matrix/client: https://www.mozilla.org/.well-known/matrix/client


  # virtual-redirect-autogen.conf merged into virtual-redirect
  # this used to be generated by a script somehow, but not now.
  # that script was dnsconfig/bin/generate-virtual-redirects.sh
- www.mozilla.org/:
  # bug 1598043
  - mozilla.ch
  # bug 1660250
  # jira SE-2237
  - www.mozilla.ch
  # bug 1559362
  - mozilla-uk.org
  #- virtual-redirect-mozilla.org FIXME: NXDOMAIN
  #- virtual-redirect-mozilla.com FIXME: NXDOMAIN
  - mozillaservice.net
  - www.mozillaservice.net
  #- getfirfox.com FIXME: valid ip, but MarkMonitor page
  #- www.getfirfox.com FIXME: valid ip, but MarkMonitor page
  - update-firefox.com
  - www.update-firefox.com
  - onemozilla.org
  - www.onemozilla.org
  # bug 1234360
  - firefoxflicks.mozilla.org
  # bug 126196
  - mozilla.hu
  - www.mozilla.hu
  # bug 1331870
  - events.mozspaces.org
  # We're not using website-beta right now.
  - website-beta.mozilla.org
  # split out store.mozilla.org|com as per bug 1142629
  # modified for bug 1260869 now that gear.mozilla.org has gone away
  - www.store.mozilla.org
  - store.mozilla.org
  - store.mozilla.com
  # bug 619759
  - www.mozilla.net
  # bug 1268570
  - firefox-downloaden.de
  # bug 830904
  - communitystore.mozilla.org
  # TODO: can we decom this?
  # bug 1234360
  - mobilepartners.mozilla.org
  # bug 1329125
  - masterfirefoxos.mozilla.org
  # SE-1224
  - inhumanads.com
  - www.inhumanads.com
  - staging.inhumanads.com
  status: 302

- www.mozilla.org/: mozilla-podcasts.org

  # bug 1361114
- www.mozilla.org/: webwewant.mozilla.org

  # bug 1169224, 1473015
- www.mozilla.org/:
  - mozilla.org.uk
  - www.mozilla.org.uk
  status: 302

  # bug 1461516
- www.mozilla.org/: smartdogz.org
  status: 302

  # FIXME: does this really have to be 307 different from 302 above?
- www.mozilla.org/: www.smartdogz.org
  status: 307

- www.mozilla.org/: triagebot.mozilla.org

- www.mozilla.org/: send.firefox.com

  # bug 537925
  # NOTE: simplified this after testing, this simple redirect is all that is needed
- www.mozilla.org/contribute/: contribute.mozilla.org

  # bug 1255221
- www.mozilla.org/contribute/friends/: friends.mozilla.org
  status: 302

  # bug 1597866
- www.mozilla.org/firefox/developer/: firefox.dev

- www.mozilla.org/firefox/lockwise/: lockbox.firefox.com

  # This is LE Blacklisted and needs to be removed
- www.mozilla.org/firefox/new/?redirect_source=getfirefox-com:
  - getfirefox.com
  - www.getfirefox.com

  # bug 1463086
- mozilla.org/nl/:
  - mozilla.nl
  - www.mozilla.nl

  # bug 1274647
- discourse.mozilla-community.org/c/firefox-development/: ask.mozilla.org
  status: 307

  # bug 1212612, 1212612
  # FIXME: this commented out redirect is incorrect, added correct one below
  #- www.mozilla.org/firefox/new/?utm_source=getfirefox-de&utm_medium=referral:
- www.mozilla.org/de/firefox/new/:
  - getfirefox.de
  - www.getfirefox.de

  # bug 896570
- www.mozilla.org/firefox/?redirect_source=getfirefox-com:
  - mozillafirefox.com
  - www.mozillafirefox.com
  - firefoxbrowser.com
  - www.firefoxbrowser.com
  - firefoxbrowser.org
  - www.firefoxbrowser.org

  # bug 1415362
- www.mozilla.org/firefox/?utm_medium=referral&utm_source=firefoxquantum-com: firefoxquantum.com

  # bug 1492428
- www.mozilla.org/fr/firefox/new/?utm_source=mozilla-fr&utm_medium=referral:
  - mozilla.fr
  - www.mozilla.fr

  # bug 1212631, 1427843
  # FIXME: this commented out redirect is incorrect, added correct one below
  #- www.mozilla.org/firefox/new/?utm_source=getfirefox-co-uk&utm_medium=referral: getfirefox.co.uk
- www.mozilla.org/en-GB/firefox/new/: getfirefox.co.uk

  # bug 1492428
- www.mozilla.org/en-GB/firefox/new/?utm_source=mozilla-eu&utm_medium=referral:
  - mozilla.eu
  - www.mozilla.eu
  - mozila.eu
  - www.mozila.eu

  # bug 1025191
- www.mozilla.org/en-US/:
  - mozilla.ca
  - www.mozilla.ca

  # bug 941881
  # NOTE: changed from http->https after verifying
- www.mozilla.org/en-US/contribute/studentambassadors/:
  - ambassadors.mozilla.org
  - students.mozilla.org
  - fsa.mozilla.org

  # bug 1335617
- www.mozilla.org/en-US/about/policy/lean-data/:
  - leandatapractices.org
  - www.leandatapractices.org
  - leandatapractices.com
  - www.leandatapractices.com
  status: 302

  # bug 1056359
- www.mozilla.org/en-US/firefox/new/:
  - mozilla.it
  - wwww.mozilla.it

- www.mozilla.org/firefox/:
  # bug 838939
  - downloadmozillafirefox.com
  # bug 948963
  - spark.mozilla.org
  # SE-1862
  - boot2gecko.net
  - www.boot2gecko.net
  - firefoxos.com
  - www.firefoxos.com
  - firefox-academic-centers.org
  - www.firefox-academic-centers.org
  - firefox-academic-centers.com
  - www.firefox-academic-centers.com
  - firefox-academic-center.org
  - www.firefox-academic-center.org
  - firefox-academic-center.com
  - www.firefox-academic-center.com
  - mozillaservice.org
  - www.mozillaservice.org
  - opentochoice.org
  - www.opentochoice.org
  - onebillionplusyou.com
  - www.onebillionplusyou.com
  status: 302

  # bug 1351245
- 'www.mozilla.org/firefox/channel/desktop/#developer': aurora.mozilla.org
  status: 302

  # bug 656457
- 'www.mozilla.org/firefox/channel/#beta': beta.mozilla.org

  # bug 1301642, 1326390
- 'www.mozilla.org/firefox/channel/#nightly': nightly.mozilla.org
  status: 302

  # bug 1212612, 1427843
- www.mozilla.org/firefox/new/?utm_source=getfirefox-net&utm_medium=referral:
  - getfirefox.net
  - www.getfirefox.net

  # bug 688019, 1427843
- www.mozilla.org/firefox/new/?utm_source=getfirefox-org&utm_medium=referral:
  - getfirefox.org
  - www.getfirefox.org

  # bug 1262196, 1427843
- www.mozilla.org/firefox/new/?utm_source=firefox-hu&utm_medium=referral:
  - firefox.hu
  - www.firefox.hu

  # bug 749836
- www.mozilla.org/firefox/new/?utm_source=firefox-pt&utm_medium=referral:
  - firefox.pt
  - www.firefox.pt

  # bug 1243355
- www.mozilla.org/fy-NL/:
  - mozilla.frl
  - www.mozilla.frl
  status: 302

  # bug 1268570, 1427843
  # FIXME: this commented out redirect is incorrect, added correct one below
  #- www.mozilla.org/firefox/new/?utm_source=firefox-lt&utm_medium=referral:
- www.mozilla.org/lt/firefox/:
  - firefox.lt
  - www.firefox.lt

- www.mozilla.org/MPL/: mpl.mozilla.org

  # bug 1311392
- www.mozilla.org/pl/firefox/new/:
  - mozillafirefox.pl
  - www.mozillafirefox.pl
  status: 302

  # bug 1440375
- www.mozilla.org/pt-BR/: mozilla.com.br

  # bug 1427843
- www.mozilla.org/firefox/new/?utm_source=firefox-be&utm_medium=referral:
  - firefox.be
  - www.firefox.be

  # bug 692904
  # FIXME: apache points to http; this will go to https
- www.mozilla-russia.org/:
  - mozilla.com.ru
  - www.mozilla.com.ru

  # bug 1255190
- www.openwebgames.com/: openwebgames.com
  status: 302

  # SE-2950
- wiki.mozilla.org/india/: wiki.mozillaindia.org
  status: 302
- developer.mozilla.org/: devs.mozillaindia.org
  status: 302

  # NOTE: changed from http->https after verifying
  #- www.thunderbird.net/:
- www.thunderbird.net/calendar/:
  - lightning-project.org
  - www.lightning-project.org

- dsts:
  - /faq.html/: support.mozilla.org/products/firefox-lockwise//
  - /addon/updates.json/: mozilla-lockwise.github.io/addon/updates.json/
  - /: www.mozilla.org/firefox/lockwise/
  srcs: lockwise.firefox.com

  # bug 756358
- dsts:
  # NOTE: changed from http->https after verifying
  - /dnt-enabler.tpl: www.mozilla.org/media/dnt/dnt-enabler.tpl
  - /: www.mozilla.org/firefox/dnt/
  srcs: dnt.mozilla.org

  # bug 1119912, 1165757, 1213900, 1200359
- dsts:
  - /dmexco: 'www.mozilla.org/about/partnerships/contentservices/?utm_source=content-moz-org&utm_medium=referral&utm_content=content_team'
  - ^/(.+): 'www.mozilla.org/about/partnerships/contentservices/$1/?utm_source=content-moz-org&utm_medium=referral&utm_content=content_team'
  - /: 'www.mozilla.org/about/partnerships/contentservices/?utm_source=content-moz-org&utm_medium=referral&utm_content=content_team'
  srcs: content.mozilla.org
  status: 302
  tests:
    # this test must be specified because rewrites `^/(.+)` will not generate a test
  - http://content.mozilla.org/test: 'https://www.mozilla.org/about/partnerships/contentservices/test/?utm_source=content-moz-org&utm_medium=referral&utm_content=content_team'

- dsts:
  - /about: www.mozilla.org/firefox/about
  - ^/([^\x00-\x1F]+): www.mozilla.org/$1
  - /: www.mozilla.org/firefox
  srcs:
  - mozilla.com
  - www.mozilla.com
  - '*.www.mozilla.com'
  tests:
  - http://mozilla.com/: https://www.mozilla.org/firefox
  - http://mozilla.com/about: https://www.mozilla.org/firefox/about
  - http://mozilla.com/foo: https://www.mozilla.org/foo
  - http://en-US.www.mozilla.com/: https://www.mozilla.org/firefox

  # bug 1566155
- dsts:
  - /tree.php/: people.mozilla.org/o
  - ^/search/(.*): 'people.mozilla.org/s?query=$1&who=staff'
  - /: people.mozilla.org/
  srcs: phonebook.mozilla.org
  status: 302
  tests:
    # this test must be specified because rewrites `^/(.*)` will not generate a test
  - http://phonebook.mozilla.org/search/test: https://people.mozilla.org/s?query=test&who=staff

  # bug 1627952
- dsts:
  - /campaigns: community.mozilla.org/campaigns/
  - /commonvoice: community.mozilla.org/activities/contributing-to-common-voice/
  - /en-US/nightly: community.mozilla.org/activities/
  - /webextensions: community.mozilla.org/activities/
  - /rust-hack: community.mozilla.org/activities/
  - /webvr-camp: community.mozilla.org/activities/
  - /webcompat-sprint: community.mozilla.org/activities/
  - /: community.mozilla.org/
  srcs: activate.mozilla.community

  # bug 1618512, 1627952
- dsts:
  - /firefoxvoicecampaign: community.mozilla.org/activities/test-firefox-voice/
  - /respond_campaign: community.mozilla.org/campaigns/respond-campaign/
  - /firefoxforgood-surfacingqualitycontentandconversat: community.mozilla.org/campaigns/
  - /becomeabetatestingbughunter: community.mozilla.org/campaigns/become-a-beta-testing-bughunter/
  - /commonvoice100: community.mozilla.org/campaigns/common-voice-100-hours-sprint/
  - /firefox66supportsprint: community.mozilla.org/groups/support-mozilla-sumo/?view=events
  - /firefoxfightsforyoucampaign: community.mozilla.org/campaigns/firefoxfightsforyoucampaign/
  - /darkfunnelEN: community.mozilla.org/campaigns/become-a-dark-funnel-detective/
  - /: community.mozilla.org/events/
  srcs: events.mozilla.org

- dsts:
  - /people: community.mozilla.org/groups/mozilla-reps/?view=people
  - /events: community.mozilla.org/groups/mozilla-reps/?view=events
  - /: community.mozilla.org/groups/mozilla-reps/
  srcs: reps.mozilla.org
  status: 307

  # SE-2412
- dsts:
  - if: '$request_uri ~ "^/update_check/(?<id>\d+)"'
    ^.*$: 'versioncheck.addons.mozilla.org/en-US/themes/update-check/$id?src=gp'
  - if: '$request_uri ~ "^(?<id>(?:/\w{2,3}(?:-\w{2,6})?))/update_check/(?<update_id>\d+)"'
    ^.*$: 'versioncheck.addons.mozilla.org$id/themes/update-check/$update_id?src=gp'
  - if: '$request_uri ~ "^(?:/\w{2,3}(?:-\w{2,6})?)?/gallery/[Dd]esigner/(?<id>.*)"'
    ^.*$: 'addons.mozilla.org/firefox/user/$id/'
  - if: '$request_uri ~ "^(?:/\w{2,3}(?:-\w{2,6})?)?/persona/(?<id>\d+)"'
    ^.*$: 'addons.mozilla.org/persona/$id'
  - if: '$request_uri ~ "^(?:/\w{2,3}(?:-\w{2,6})?)?/gallery/All/Movers"'
    ^.*$: 'addons.mozilla.org/firefox/themes/?sort=up-and-coming'
  - if: '$request_uri ~ "^(?:/\w{2,3}(?:-\w{2,6})?)?/gallery/All/Recent"'
    ^.*$: 'addons.mozilla.org/firefox/themes/?sort=created'
  - if: '$request_uri ~ "^(?:/\w{2,3}(?:-\w{2,6})?)?/gallery/All/Popular"'
    ^.*$: 'addons.mozilla.org/firefox/themes/?sort=popular'
  - redirect: addons.mozilla.org/themes/
  srcs:
  - getpersonas.com
  - www.getpersonas.com
  tests:
  - http://getpersonas.com/update_check/1234: 'https://versioncheck.addons.mozilla.org/en-US/themes/update-check/1234?src=gp'
  - http://www.getpersonas.com/update_check/5678: 'https://versioncheck.addons.mozilla.org/en-US/themes/update-check/5678?src=gp'
  - http://getpersonas.com/a_c-12_d/update_check/1234: 'https://versioncheck.addons.mozilla.org/a_c-12_d/themes/update-check/1234?src=gp'
  - http://www.getpersonas.com/a_c-12_d/update_check/12345678: 'https://versioncheck.addons.mozilla.org/a_c-12_d/themes/update-check/12345678?src=gp'
  - http://getpersonas.com/a_c/gallery/Designer/something: 'https://addons.mozilla.org/firefox/user/something/'
  - http://www.getpersonas.com/a_c/gallery/designer/something: 'https://addons.mozilla.org/firefox/user/something/'
  - http://getpersonas.com/a_c/persona/456: 'https://addons.mozilla.org/persona/456'
  - http://www.getpersonas.com/persona/45: 'https://addons.mozilla.org/persona/45'
  - http://getpersonas.com/gallery/All/Movers: 'https://addons.mozilla.org/firefox/themes/?sort=up-and-coming'
  - http://www.getpersonas.com/12d-a1/gallery/All/Movers: 'https://addons.mozilla.org/firefox/themes/?sort=up-and-coming'
  - http://getpersonas.com/12_-a1/gallery/All/Recent: 'https://addons.mozilla.org/firefox/themes/?sort=created'
  - http://www.getpersonas.com/gallery/All/Recent: 'https://addons.mozilla.org/firefox/themes/?sort=created'
  - http://getpersonas.com/A_C/gallery/All/Popular: 'https://addons.mozilla.org/firefox/themes/?sort=popular'
  - http://www.getpersonas.com/gallery/All/Popular: 'https://addons.mozilla.org/firefox/themes/?sort=popular'
  - http://getpersonas.com/: 'https://addons.mozilla.org/themes/'
  - http://www.getpersonas.com/not/a/real/path: 'https://addons.mozilla.org/themes/'

- dsts:
  - if: '$query_string ~ "^hl=(?<hl>[^&]+)&url=(?<url>[^&]+)"'
    ^/$: 'www.stopbadware.org/firefox?hl=$hl&url=$url?'
  - if: '$query_string ~ "^url=(?<url>[^&]+)"'
    ^/$: 'www.stopbadware.org/firefox?url=$url?'
  - redirect: www.mozilla.org/
  srcs:
  - malware-error.mozilla.com
  - '*.malware-error.mozilla.com'
  tests:
  - http://malware-error.mozilla.com/?hl=en&url=path: 'https://www.stopbadware.org/firefox?hl=en&url=path'
  - http://malware-error.mozilla.com/?url=path: 'https://www.stopbadware.org/firefox?url=path'
  - http://malware-error.mozilla.com/: https://www.mozilla.org/
  - http://malware-error.mozilla.com/foobar: https://www.mozilla.org/foobar

- dsts:
  - if: '$query_string ~ "^hl=(?<hl>[^&]+)&url=(?<url>[^&]+)"'
    ^/$: 'safebrowsing.google.com/safebrowsing/report_error/?tpl=mozilla&hl=$hl&url=$url?'
  - if: '$query_string ~ "^url=(?<url>[^&]+)"'
    ^/$: 'safebrowsing.google.com/safebrowsing/report_error/?tpl=mozilla&url=$url?'
  - redirect: www.mozilla.org/
  srcs:
  - phish-error.mozilla.com
  - '*.phish-error.mozilla.com'
  tests:
  - http://phish-error.mozilla.com/?hl=en&url=path: 'https://safebrowsing.google.com/safebrowsing/report_error/?tpl=mozilla&hl=en&url=path'
  - http://phish-error.mozilla.com/?url=path: 'https://safebrowsing.google.com/safebrowsing/report_error/?tpl=mozilla&url=path'
  - http://phish-error.mozilla.com/: https://www.mozilla.org/
  - http://phish-error.mozilla.com/foobar: https://www.mozilla.org/foobar

- dsts:
  - if: '$query_string ~ "^hl=(?<hl>es)(?:-ES|-AR)&url=(?<url>[^&]+)"'
    ^/$: 'safebrowsing.google.com/safebrowsing/report_phish/?tpl=mozilla&hl=$hl&url=$url?'
  - if: '$query_string ~ "^hl=(?:nb|nn)-NO&url=(?<url>[^&]+)"'
    ^/$: 'safebrowsing.google.com/safebrowsing/report_phish/?tpl=mozilla&hl=no&url=$url?'
  - if: '$query_string ~ "^hl=pt-PT&url=(?<url>[^&]+)"'
    ^/$: 'safebrowsing.google.com/safebrowsing/report_phish/?tpl=mozilla&hl=pt-BR&url=$url?'
  - if: '$query_string ~ "^hl=(?<hl>ar|bg|cs|da|de|el|en|en-GB|es|fi|fr|hu|it|iw|ja|ko|nl|no|l|pt-BR|ru|sk|sv|tr|zh-CN|zh-TW)&url=(?<url>[^&]+)"'
    ^/$: 'safebrowsing.google.com/safebrowsing/report_phish/?tpl=mozilla&hl=$hl&url=$url?'
  - if: '$query_string ~ "^hl=(?<hl>[^&]+)&url=(?<url>[^&]+)"'
    ^/$: 'safebrowsing.google.com/safebrowsing/report_phish/?tpl=mozilla&hl=$hl&url=$url?'
  # bug 1387246, send lone url query strings to google safebrowsing
  - if: '$query_string ~ "url=(?<url>[^&]+)"'
    ^/$: 'safebrowsing.google.com/safebrowsing/report_phish/?tpl=mozilla&url=$url?'
  - redirect: www.mozilla.org/
  srcs:
  - phish-report.mozilla.com
  - '*.phish-report.mozilla.com'
  tests:
  - http://phish-report.mozilla.com/?hl=es&url=path: 'https://safebrowsing.google.com/safebrowsing/report_phish/?tpl=mozilla&hl=es&url=path'
  - http://phish-report.mozilla.com/?hl=nb-NO&url=path: 'https://safebrowsing.google.com/safebrowsing/report_phish/?tpl=mozilla&hl=no&url=path'
  - http://phish-report.mozilla.com/?hl=pt-PT&url=path: 'https://safebrowsing.google.com/safebrowsing/report_phish/?tpl=mozilla&hl=pt-BR&url=path'
  - http://phish-report.mozilla.com/?hl=en-GB&url=path: 'https://safebrowsing.google.com/safebrowsing/report_phish/?tpl=mozilla&hl=en-GB&url=path'
  - http://phish-report.mozilla.com/?hl=zh-TW&url=path: 'https://safebrowsing.google.com/safebrowsing/report_phish/?tpl=mozilla&hl=zh-TW&url=path'
  - http://phish-report.mozilla.com/?hl=foo&url=bar: 'https://safebrowsing.google.com/safebrowsing/report_phish/?tpl=mozilla&hl=foo&url=bar'
  - http://phish-report.mozilla.com/?url=foobar: 'https://safebrowsing.google.com/safebrowsing/report_phish/?tpl=mozilla&url=foobar'
  - http://phish-report.mozilla.com/foobar: https://www.mozilla.org/foobar
  status: 302

  # bug 1716653
- relay.firefox.com/: mozmail.com
  status: 302

- mozilla-hub.atlassian.net/: jira.mozilla.com
  status: 302

# bug SE-2241
- dsts:
  - if: '$request_uri ~ ^/(\d+)$'
    ^/(\d+)$: bugzilla.mozilla.org/show_bug.cgi?id=$1
  - if: '$request_uri ~ ^/form(.+)$'
    ^/form(.+)$: bugzilla.mozilla.org/form$1
  - if: '$request_uri ~ ^/(.+)'
    ^/(.+)$: bugzilla.mozilla.org/buglist.cgi?quicksearch=$1
  - redirect: bugzilla.mozilla.org/
  srcs:
  - bugzil.la
  tests:
  - https://bugzil.la/: https://bugzilla.mozilla.org/
  - https://bugzil.la/123456: https://bugzilla.mozilla.org/show_bug.cgi?id=123456
  - https://bugzil.la/form.foo: https://bugzilla.mozilla.org/form.foo
  - https://bugzil.la/glonk: https://bugzilla.mozilla.org/buglist.cgi?quicksearch=glonk

# https://mozilla-hub.atlassian.net/browse/SVCSE-140
- www.mozilla.org/: status.mozilla.org
  status: 302

# https://mozilla-hub.atlassian.net/browse/SE-2450
- dsts:
    - if: '$request_uri ~ "(?i)^/universityambassadors/?$"' # bug 870410
      ^: 'campus.mozilla.community/?redirect_source=firefox-com'
    - if: '$request_uri ~ "(?i)^/os/?$"'
      ^: 'support.mozilla.org/products/firefox-os?redirect_source=firefox-com'
    - if: '$request_uri ~ "(?i)^/desktop/?$"' # bug 1004274
      ^: 'www.mozilla.org/firefox/desktop/?redirect_source=firefox-com'
    - if: '$request_uri ~ "(?i)^/android/?$"' # bug 1053356
      ^: 'www.mozilla.org/firefox/android/?redirect_source=firefox-com'
    - if: '$request_uri ~ "(?i)^/developer/?$"' # bug 1091132
      ^: 'www.mozilla.org/firefox/developer/?redirect_source=firefox-com'
    - if: '$request_uri ~ "(?i)^/(10|independent)/?$"' # bug 1091891, bug 1094235
      ^: 'www.mozilla.org/firefox/features/independent/?redirect_source=firefox-com'
    - if: '$request_uri ~ "(?i)^/hello/?$"' # bug 1098044
      ^: 'www.mozilla.org/firefox/hello/?redirect_source=firefox-com'
    - if: '$request_uri ~ "(?i)^/personal/?$"' # bug 1159397
      ^: 'www.mozilla.org/firefox/personal/?redirect_source=firefox-com'
    - if: '$request_uri ~ "(?i)^/choose/?$"' # bug 1219380
      ^: 'www.mozilla.org/firefox/choose/?redirect_source=firefox-com'
    - if: '$request_uri ~ "(?i)^/switch/?$"' # bug 1432228
      ^: 'www.mozilla.org/firefox/switch/?redirect_source=firefox-com'
    - if: '$request_uri ~ "(?i)^/enterprise/?$"' # Bug 1445276
      ^: 'www.mozilla.org/firefox/enterprise/?redirect_source=firefox-com'
    - if: '$request_uri ~ "(?i)^/containers/?$"' # bug 1451367
      ^: 'www.mozilla.org/firefox/facebookcontainer/?redirect_source=firefox-com'
    - if: '$request_uri ~ "(?i)^/pdx/?$"' # bug 1456278
      ^: 'www.mozilla.org/firefox/new/?xv=portland&campaign=city-portland-2018&redirect_source=firefox-com'
    - if: '$request_uri ~ "(?i)^/pair/?$"' # bug 1539867
      ^: 'accounts.firefox.com/pair/'
    - if: '$request_uri ~ "(?i)^/(join|rejoindre)/?$"' # bug 1548919
      ^: 'www.mozilla.org/firefox/accounts/?redirect_source=join'
    - if: '$request_uri ~ "(?i)^/(privacy|privatsphaere)/?$"' # SRE-431
      ^: 'www.mozilla.org/firefox/privacy/products/?redirect_source=firefox-com'
    - if: '$request_uri ~ "(?i)^/viepriv(e|Ã©)e/?$"'
      ^: 'www.mozilla.org/firefox/privacy/products/?redirect_source=firefox-com'
    - if: '$request_uri ~ "(?i)^/nightly/?$"' # https://github.com/mozmeao/www.firefox.com/issues/9
      ^: 'www.mozilla.org/en-US/firefox/channel/desktop/#nightly'
    - if: '$request_uri ~ "(?i)^/armchair/?$"' # issue #21
      ^: 'www.mozilla.org/firefox/unfck/?redirect_source=firefox-com&utm_medium=audio&utm_source=armchair&utm_campaign=unfck&utm_content=podcast'
    - if: '$request_uri ~ "(?i)^/jvn/?$"'
      ^: 'www.mozilla.org/firefox/unfck/?redirect_source=firefox-com&utm_medium=audio&utm_source=jvn&utm_campaign=unfck&utm_content=podcast'
    - if: '$request_uri ~ "(?i)^/literally/?$"'
      ^: 'www.mozilla.org/firefox/unfck/?redirect_source=firefox-com&utm_medium=audio&utm_source=literally&utm_campaign=unfck&utm_content=podcast'
    - if: '$request_uri ~ "(?i)^/pivot/?$"'
      ^: 'www.mozilla.org/firefox/unfck/?redirect_source=firefox-com&utm_medium=audio&utm_source=pivot&utm_campaign=unfck&utm_content=podcast'
    - if: '$request_uri ~ "(?i)^/podsave/?$"'
      ^: 'www.mozilla.org/firefox/unfck/?redirect_source=firefox-com&utm_medium=audio&utm_source=podsave&utm_campaign=unfck&utm_content=podcast'
    - if: '$request_uri ~ "(?i)^/smartless/?$"'
      ^: 'www.mozilla.org/firefox/unfck/?redirect_source=firefox-com&utm_medium=audio&utm_source=smartless&utm_campaign=unfck&utm_content=podcast'
    - if: '$request_uri ~ "(?i)^/thedaily/?$"'
      ^: 'www.mozilla.org/firefox/unfck/?redirect_source=firefox-com&utm_medium=audio&utm_source=thedaily&utm_campaign=unfck&utm_content=podcast'
    - if: '$request_uri ~ "(?i)^/ezra/?$"'
      ^: 'www.mozilla.org/firefox/unfck/?redirect_source=firefox-com&utm_medium=audio&utm_source=ezra&utm_campaign=unfck&utm_content=podcast'
    - if: '$request_uri ~ "(?i)^/explained/?$"'
      ^: 'www.mozilla.org/firefox/unfck/?redirect_source=firefox-com&utm_medium=audio&utm_source=explained&utm_campaign=unfck&utm_content=podcast'
    - if: '$request_uri ~ "(?i)^/wtf/?$"'
      ^: 'www.mozilla.org/firefox/unfck/?redirect_source=firefox-com&utm_medium=audio&utm_source=wtf&utm_campaign=unfck&utm_content=podcast'
    - if: '$request_uri ~ "(?i)^/liebe/?$"' # issue 32
      ^: 'www.mozilla.org/firefox/unfck/?redirect_source=firefox-com&utm_medium=audio&utm_source=prosieben&utm_campaign=unfck&utm_content=podcast'
    - if: '$request_uri ~ "(?i)^/(unfu?ck|love|rendonslenetplusnet)/?$"' # issues #19, #18, #15, #13, and #27, and Jira SE-1256
      ^: 'www.mozilla.org/firefox/unfck/?redirect_source=firefox-com&utm_medium=referral&utm_source=firefox.com&utm_campaign=unfck'
    - if: '$request_uri ~ "(?i)^/famil(y|ies)/?$"' # Jira SE-3278
      ^: 'www.mozilla.org/firefox/family/?utm_medium=referral&utm_source=firefox.com&utm_campaign=firefox-for-families'
    - if: '$request_uri ~ "(?i)^/famil(y|ies)/?\?.*$"' # Jira SE-3278
      ^: 'www.mozilla.org/firefox/family/'
    - redirect: 'www.mozilla.org/firefox/new/?redirect_source=firefox-com' #fallback redirect, bug 896570, bug 1427843
  status: 302
  headers:
    # NOTE: this overrides the default behavior and removed includeSubdomains
    Strict-Transport-Security: max-age=0
  preserve-path: false
  srcs:
  - www.firefox.com
  - firefox.com
  - fxc-stage.moz.works
  tests:
  - http://www.firefox.com/: 'https://www.mozilla.org/firefox/new/?redirect_source=firefox-com'
  - http://firefox.com/: 'https://www.mozilla.org/firefox/new/?redirect_source=firefox-com'
  - http://www.firefox.com/universityambassadors: 'https://campus.mozilla.community/?redirect_source=firefox-com'
  - http://www.firefox.com/UniversityAmbassadors/: 'https://campus.mozilla.community/?redirect_source=firefox-com'
  - http://www.firefox.com/os/: 'https://support.mozilla.org/products/firefox-os?redirect_source=firefox-com'
  - http://www.firefox.com/desktop/: 'https://www.mozilla.org/firefox/desktop/?redirect_source=firefox-com'
  - http://www.firefox.com/android/: 'https://www.mozilla.org/firefox/android/?redirect_source=firefox-com'
  - http://www.firefox.com/developer/: 'https://www.mozilla.org/firefox/developer/?redirect_source=firefox-com'
  - http://www.firefox.com/10/: 'https://www.mozilla.org/firefox/features/independent/?redirect_source=firefox-com'
  - http://www.firefox.com/independent/: 'https://www.mozilla.org/firefox/features/independent/?redirect_source=firefox-com'
  - http://www.firefox.com/hello/: 'https://www.mozilla.org/firefox/hello/?redirect_source=firefox-com'
  - http://www.firefox.com/personal/: 'https://www.mozilla.org/firefox/personal/?redirect_source=firefox-com'
  - http://www.firefox.com/choose/: 'https://www.mozilla.org/firefox/choose/?redirect_source=firefox-com'
  - http://www.firefox.com/switch/: 'https://www.mozilla.org/firefox/switch/?redirect_source=firefox-com'
  - http://www.firefox.com/enterprise/: 'https://www.mozilla.org/firefox/enterprise/?redirect_source=firefox-com'
  - http://www.firefox.com/containers/: 'https://www.mozilla.org/firefox/facebookcontainer/?redirect_source=firefox-com'
  - http://www.firefox.com/pdx/: 'https://www.mozilla.org/firefox/new/?xv=portland&campaign=city-portland-2018&redirect_source=firefox-com'
  - http://www.firefox.com/pair/: 'https://accounts.firefox.com/pair/'
  - http://www.firefox.com/join/: 'https://www.mozilla.org/firefox/accounts/?redirect_source=join'
  - http://www.firefox.com/rejoindre/: 'https://www.mozilla.org/firefox/accounts/?redirect_source=join'
  - http://www.firefox.com/privacy/: 'https://www.mozilla.org/firefox/privacy/products/?redirect_source=firefox-com'
  - http://www.firefox.com/privatsphaere/: 'https://www.mozilla.org/firefox/privacy/products/?redirect_source=firefox-com'
  - http://www.firefox.com/vieprivee/: 'https://www.mozilla.org/firefox/privacy/products/?redirect_source=firefox-com'
  - http://www.firefox.com/nightly/: 'https://www.mozilla.org/en-US/firefox/channel/desktop/#nightly'
  - http://www.firefox.com/armchair/: 'https://www.mozilla.org/firefox/unfck/?redirect_source=firefox-com&utm_medium=audio&utm_source=armchair&utm_campaign=unfck&utm_content=podcast'
  - http://www.firefox.com/jvn/: 'https://www.mozilla.org/firefox/unfck/?redirect_source=firefox-com&utm_medium=audio&utm_source=jvn&utm_campaign=unfck&utm_content=podcast'
  - http://www.firefox.com/literally/: 'https://www.mozilla.org/firefox/unfck/?redirect_source=firefox-com&utm_medium=audio&utm_source=literally&utm_campaign=unfck&utm_content=podcast'
  - http://www.firefox.com/pivot/: 'https://www.mozilla.org/firefox/unfck/?redirect_source=firefox-com&utm_medium=audio&utm_source=pivot&utm_campaign=unfck&utm_content=podcast'
  - http://www.firefox.com/podsave/: 'https://www.mozilla.org/firefox/unfck/?redirect_source=firefox-com&utm_medium=audio&utm_source=podsave&utm_campaign=unfck&utm_content=podcast'
  - http://www.firefox.com/smartless/: 'https://www.mozilla.org/firefox/unfck/?redirect_source=firefox-com&utm_medium=audio&utm_source=smartless&utm_campaign=unfck&utm_content=podcast'
  - http://www.firefox.com/thedaily/: 'https://www.mozilla.org/firefox/unfck/?redirect_source=firefox-com&utm_medium=audio&utm_source=thedaily&utm_campaign=unfck&utm_content=podcast'
  - http://www.firefox.com/ezra/: 'https://www.mozilla.org/firefox/unfck/?redirect_source=firefox-com&utm_medium=audio&utm_source=ezra&utm_campaign=unfck&utm_content=podcast'
  - http://www.firefox.com/explained/: 'https://www.mozilla.org/firefox/unfck/?redirect_source=firefox-com&utm_medium=audio&utm_source=explained&utm_campaign=unfck&utm_content=podcast'
  - http://www.firefox.com/wtf/: 'https://www.mozilla.org/firefox/unfck/?redirect_source=firefox-com&utm_medium=audio&utm_source=wtf&utm_campaign=unfck&utm_content=podcast'
  - http://www.firefox.com/liebe/: 'https://www.mozilla.org/firefox/unfck/?redirect_source=firefox-com&utm_medium=audio&utm_source=prosieben&utm_campaign=unfck&utm_content=podcast'
  - http://www.firefox.com/unfck: 'https://www.mozilla.org/firefox/unfck/?redirect_source=firefox-com&utm_medium=referral&utm_source=firefox.com&utm_campaign=unfck'
  - http://www.firefox.com/unfuck: 'https://www.mozilla.org/firefox/unfck/?redirect_source=firefox-com&utm_medium=referral&utm_source=firefox.com&utm_campaign=unfck'
  - http://www.firefox.com/love: 'https://www.mozilla.org/firefox/unfck/?redirect_source=firefox-com&utm_medium=referral&utm_source=firefox.com&utm_campaign=unfck'
  - http://www.firefox.com/rendonslenetplusnet: 'https://www.mozilla.org/firefox/unfck/?redirect_source=firefox-com&utm_medium=referral&utm_source=firefox.com&utm_campaign=unfck'
  - http://www.firefox.com/family: 'https://www.mozilla.org/firefox/family/?utm_medium=referral&utm_source=firefox.com&utm_campaign=firefox-for-families'
  - http://www.firefox.com/families: 'https://www.mozilla.org/firefox/family/?utm_medium=referral&utm_source=firefox.com&utm_campaign=firefox-for-families'
  - "http://www.firefox.com/family?dude=abides": 'https://www.mozilla.org/firefox/family/?dude=abides'
  - "http://www.firefox.com/families?dude=abides": 'https://www.mozilla.org/firefox/family/?dude=abides'
  - http://www.firefox.com/foo/bar: 'https://www.mozilla.org/firefox/new/?redirect_source=firefox-com'

#  SE-3189
- dsts:
  - ^/(.*): www.mozilla.org/firefox/
  status: 302
  preserve-path: false
  srcs:
  - turningred.firefox.com
  - truecolours.firefox.com
  - truecolors.firefox.com
  tests:
  - http://truecolors.firefox.com/: 'https://www.mozilla.org/firefox/'
  - http://truecolours.firefox.com/: 'https://www.mozilla.org/firefox/'
  - http://turningred.firefox.com/: 'https://www.mozilla.org/firefox/'


# SE-3060 & SVCSE-350
- dsts:
  - if: '$request_uri ~ ^/ytht(.*)$'
    ^: 'm.youtube.com/'
  - if: '$request_uri ~ ^/ytfc(.*)$'
    ^: 'm.youtube.com/'
  preserve-path: false
  srcs:
  - ftv.cdn.mozilla.net
  - ftv.prod.mozaws.net
  tests:
  - http://ftv.cdn.mozilla.net/ytht: https://m.youtube.com/
  - http://ftv.cdn.mozilla.net/ytfc: https://m.youtube.com/
  - http://ftv.cdn.mozilla.net/ytfcfoo: https://m.youtube.com/
  - http://ftv.prod.mozaws.net/ytht: https://m.youtube.com/
  - http://ftv.prod.mozaws.net/ytfc: https://m.youtube.com/

# SE-3083
- dsts:
    - redirect: support.mozilla.org/en-US/kb/end-support-firefox-reality
  srcs:
    - www.webxr.today
    - webxr.today
  tests:
    - http://www.webxr.today/: "https://support.mozilla.org/en-US/kb/end-support-firefox-reality"
    - http://webxr.today/: "https://support.mozilla.org/en-US/kb/end-support-firefox-reality"

# SE-3133
- www.tekcopteg.com/: tekcopteg.com

# SVCSE-350
- m.youtube.com/: ftv.stage.mozaws.net
  status: 302

# SE-2418
- dsts:
    - redirect: webthings.io/
  srcs:
    - iot.mozilla.org
    - '*.iot.mozilla.org'
  tests:
    - http://iot.mozilla.org/: "https://webthings.io/"
    - http://web.iot.mozilla.org/: "https://webthings.io/"

# SE-3300
- dsts:
    - /: mozilla.org/about/webvision/
    - /full/: mozilla.org/about/webvision/full/
  srcs: webvision.mozilla.org
  tests:
    - http://webvision.mozilla.org/: https://mozilla.org/about/webvision/
    - http://webvision.mozilla.org/full/: https://mozilla.org/about/webvision/full/

# SE-3315
- developer.mozilla.org/en-US/docs/MDN: mdn-contributor-docs.mozilla.org

# SE-3342
- dsts:
  - if: $query_string ~ "pageId=109979676"
    ^: mozilla-hub.atlassian.net/wiki/spaces/PR/pages/24451391/Time+Off+Vacation?
  - if: '$request_uri ~ ^/wiki/(.*)'
    ^: mozilla-hub.atlassian.net/
  - redirect: mozilla-hub.atlassian.net/wiki/
  srcs: mana.mozilla.org
  tests:
    - http://mana.mozilla.org/: https://mozilla-hub.atlassian.net/wiki/
    - http://mana.mozilla.org/wiki/display/PR/Career+Development+Resources: https://mozilla-hub.atlassian.net/wiki/display/PR/Career+Development+Resources
    - https://mana.mozilla.org/wiki/pages/viewpage.action?pageId=109979676: https://mozilla-hub.atlassian.net/wiki/spaces/PR/pages/24451391/Time+Off+Vacation

# DSRE-671
- mozilla.cloud.looker.com/dashboards/918: missioncontrol.telemetry.mozilla.org

# SE-3386
- blog.mozilla.org/en/mozilla/pulse-joins-the-mozilla-family/:
  - automaticstatus.com
  - commons.so
  - focustime.ai
  - getpulse.me
  - getpulse.team
  - holopod.com
  - lentil.ai
  - loopteam.co
  - reloc.io
  - www.automaticstatus.com
  - www.commons.so
  - www.focustime.ai
  - www.getpulse.me
  - www.getpulse.team
  - www.holopod.com
  - www.lentil.ai
  - www.loopteam.co
  - www.reloc.io

# IO-2308 redirect webdx to fxdx
- fxdx.dev/: webdx.dev

# SE-3415 Redirect mixedreality.mozilla.org to hubs.mozilla.com/labs/
- hubs.mozilla.com/labs/: mixedreality.mozilla.org

# OPST-277 Redirect mdn.mozillademos.org/* to mdn.dev/archives/media/*
- dsts:
  - ^/(.*): 'mdn.dev/archives/media/$1'
  srcs:
  - mdn.mozillademos.org
  - media.prod.mdn.mozit.cloud
  - media.stage.mdn.mozit.cloud
  tests:
  - https://mdn.mozillademos.org/attachments/: https://mdn.dev/archives/media/attachments/
  - https://mdn.mozillademos.org/samples/: https://mdn.dev/archives/media/samples/

# OPST-277 Redirect insights.developer.mozilla.org/* to mdn.dev/archives/insights/*
- dsts:
  - ^/(.*): 'mdn.dev/archives/insights/$1'
  srcs: insights.developer.mozilla.org
  tests:
  - https://insights.developer.mozilla.org/reports/pdf/MDN-Web-DNA-Report-2020.pdf: https://mdn.dev/archives/insights/reports/pdf/MDN-Web-DNA-Report-2020.pdf

# SE-3426
- acorn.firefox.com/: design.firefox.com

- www.mozilla.org/:
   # DSRE-1301
  - members.rally.mozilla.org
  # DSRE-1173
  - rally.mozilla.org

# 404 Hosts
- nginx: |
     server {
       server_name discovery.addons.mozilla.org discovery.addons.allizom.org discovery.addons-dev.allizom.org;
       return 404;
     }


# screenshots.firefox.com migration SVCSE-449
- nginx: |
    server {
      server_name screenshot.firefox.com screenshot.firefoxusercontent.com screenshotcdn.firefox.com screenshotcdn.firefoxusercontent.com screenshots.firefox.com screenshots.firefoxusercontent.com screenshotscdn.firefox.com screenshotscdn.firefoxusercontent.com;

      location / {
        return 301 https://support.mozilla.org/kb/take-screenshots-firefox;
      }

      location /event {
        return 410;
      }

      location /images {
        return 410;
      }

      location /timing {
        return 410;
      }
    }

# SE-3598 - Pocket support migration to SUMO
- dsts:
  - if: '$request_uri ~ ^/article/(.*)$'
    ^/article/(.*$): support.mozilla.org/kb/pocket/$1
  - redirect: support.mozilla.org/products/pocket
  srcs:
  - help.getpocket.com
  status: 302
  preserve-path: false
  tests:
  - https://help.getpocket.com/: https://support.mozilla.org/products/pocket
  - https://help.getpocket.com/article/885-saving-to-pocket-on-android: https://support.mozilla.org/kb/pocket/885-saving-to-pocket-on-android
  - https://help.getpocket.com/article/123-smith-article/foo/bar: https://support.mozilla.org/kb/pocket/123-smith-article/foo/bar
  - https://help.getpocket.com/categories/857-category: https://support.mozilla.org/products/pocket
  - https://help.getpocket.com/notarticle/fooo/bar: https://support.mozilla.org/products/pocket

# SE-3660
- dsts:
    - redirect: developer.mozilla.org/
  srcs:
    - mozilla.dev
    - www.mozilla.dev
    - developer.mozilla.com
  tests:
    - https://mozilla.dev/: https://developer.mozilla.org/
    - https://www.mozilla.dev/: https://developer.mozilla.org/
    - https://developer.mozilla.com/: https://developer.mozilla.org/

- dsts:
    - ^/(.*): 'developer.mozilla.org/$1'
  srcs:
    - wiki.developer.mozilla.org
    - beta.developer.mozilla.org
  tests:
    - https://wiki.developer.mozilla.org/: "https://developer.mozilla.org/"
    - https://wiki.developer.mozilla.org/foo: "https://developer.mozilla.org/foo"
    - https://beta.developer.mozilla.org/foo: "https://developer.mozilla.org/foo"

# SE-3779
- www.mozilla.org/: experiencethearch.mozilla.org

#SVCSE-1515
- status.services.mozilla.com/:
  - status.vpn.mozilla.org
  - status.relay.firefox.com

# SE-3873
- github.com/mozilla/contribute.json:
  - contributejson.org
  - www.contributejson.org
