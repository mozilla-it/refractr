refracts:
  # This is the represenation in the refractr.yml file
  # A single domain is interpreted as a single http->https redirect.

  # Simple http->https redirect
  # http://devloper.mozilla.com -> https://developer.mozilla.com
- developer.mozilla.com

  # Simple http->https redirect
  # http://devloper.mozilla.org -> https://developer.mozilla.org
- developer.mozilla.org

show:
  # This is the representation once these get loaded into refractr.
  # Notice how the srcs and dsts are normalized and the tests are
  # generated http->https with the trailing '/'.

- dsts: developer.mozilla.com
  srcs: [developer.mozilla.com]
  status: 301
  tests:
  - http://developer.mozilla.com: https://developer.mozilla.com/

- dsts: developer.mozilla.org
  srcs: [developer.mozilla.org]
  status: 301
  tests:
  - http://developer.mozilla.org: https://developer.mozilla.org

nginx:
  # This is the representation in nginx for these redirects.

# Generated nginx for http(s)://developer.mozilla.com -> https://developer.mozilla.com/ redirect
- |
  server {
      server_name developer.mozilla.com;
      return 301 https://developer.mozilla.com;
  }

# Generated nginx for http(s)://developer.mozilla.org -> https://developer.mozilla.org/ redirect
- |
  server {
      server_name developer.mozilla.org;
      return 301 https://developer.mozilla.org;
  }

validate:
  # This is the represenation of the validation working on localhost

- dsts: developer.mozilla.com/
  srcs: [developer.mozilla.com]
  status: 301
  validation:
    netloc: localhost
    tests:
    - http://developer.mozilla.com -> https://developer.mozilla.com/:
        hops:
        - 301 http://developer.mozilla.com -> https://developer.mozilla.com/ MATCHED
        test-result: MATCHED
    validate-result: SUCCESS

- dsts: developer.mozilla.org/
  srcs: [developer.mozilla.org]
  status: 301
  validation:
    netloc: localhost
    tests:
    - http://developer.mozilla.org -> https://developer.mozilla.org/:
        hops:
        - 301 http://developer.mozilla.org -> https://developer.mozilla.org/ MATCHED
        test-result: MATCHED
    validate-result: SUCCESS

